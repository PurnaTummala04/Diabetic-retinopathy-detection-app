{% extends "base.html" %}

{% block content %}
<div class="card" style="max-width: 900px;">
    <h2 style="text-align: center; margin-bottom: 2rem;">New Assessment</h2>

    <form method="POST">
        <h3 style="margin: 2rem 0 1rem; color: var(--primary);">Image Features</h3>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            <div class="form-group">
                <label for="exudates_count">Exudates Count</label>
                <input type="number" id="exudates_count" name="exudates_count" min="0" placeholder="e.g., 5" required>
            </div>

            <div class="form-group">
                <label for="hemorrhages_count">Hemorrhages Count</label>
                <input type="number" id="hemorrhages_count" name="hemorrhages_count" min="0" placeholder="e.g., 2" required>
            </div>

            <div class="form-group">
                <label for="microaneurysms_count">Microaneurysms Count</label>
                <input type="number" id="microaneurysms_count" name="microaneurysms_count" min="0" placeholder="e.g., 10" required>
            </div>

            <div class="form-group">
                <label for="vessel_tortuosity">Vessel Tortuosity</label>
                <input type="number" id="vessel_tortuosity" name="vessel_tortuosity" step="0.01" min="0" placeholder="e.g., 0.85" required>
            </div>

            <div class="form-group">
                <label for="macular_thickness">Macular Thickness</label>
                <input type="number" id="macular_thickness" name="macular_thickness" step="0.01" min="0" placeholder="e.g., 250" required>
            </div>
        </div>

        <h3 style="margin: 2rem 0 1rem; color: var(--primary);">Clinical Features</h3>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            <div class="form-group">
                <label for="fasting_glucose">Fasting Glucose (mg/dL)</label>
                <input type="number" id="fasting_glucose" name="fasting_glucose" step="0.01" min="0" placeholder="e.g., 120" required>
            </div>

            <div class="form-group">
                <label for="hba1c">HbA1c (%)</label>
                <input type="number" id="hba1c" name="hba1c" step="0.01" min="0" placeholder="e.g., 6.5" required>
            </div>

            <div class="form-group">
                <label for="diabetes_duration">Diabetes Duration (years)</label>
                <input type="number" id="diabetes_duration" name="diabetes_duration" step="0.01" min="0" placeholder="e.g., 5" required>
            </div>
        </div>

        <div class="form-group" style="margin-top: 2rem;">
            <label for="doctor_id">Assign to Doctor (Optional)</label>
            <select id="doctor_id" name="doctor_id">
                <option value="">-- Self-Assessment --</option>
                {% for doc in doctors %}
                    <option value="{{ doc._id }}">{{ doc.name }} ({{ doc.username }})</option>
                {% endfor %}
            </select>
        </div>

        <button type="submit" class="btn btn-primary" style="width: 100%; font-size: 1.1rem; margin-top: 1.5rem;">Submit Assessment</button>
    </form>
</div>
{% endblock %}